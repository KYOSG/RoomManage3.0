{"version":3,"file":"js/216.686fedbf.js","mappings":"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","sources":["webpack://rbs/./src/views/Admin/RoomTimeAndReasonManage.vue","webpack://rbs/./src/views/Admin/RoomTimeAndReasonManage.vue?5c05"],"sourcesContent":["<template>\r\n  <el-page-header content=\"系统管理\" style=\"margin-bottom: 30px\" @back=\"this.$router.push('/Login')\"/>\r\n  <div class=\"bac\" style=\"padding-left: 40px\">\r\n    <el-space>\r\n      <!--原因管理-->\r\n      <el-card shadow=\"always\" :v-loading=\"isLoading\" style=\"width: 500px;margin-right: 40px;height: 300px\">\r\n        <el-space style=\"margin-bottom: 10px\">\r\n          <el-input placeholder=\"原因名称\" v-model=\"this.reasonName\"/>\r\n          <el-button @click=\"addReason\">添加原因</el-button>\r\n        </el-space>\r\n        <el-table\r\n            :data=\"reasons\"\r\n            highlight-current-row\r\n            max-height=\"220\">\r\n          <el-table-column label=\"ID\" prop=\"id\"></el-table-column>\r\n          <el-table-column label=\"原因名称\" prop=\"name\"></el-table-column>\r\n          <el-table-column label=\"操作\" >\r\n            <template #default=\"scope\">\r\n              <el-button type=\"danger\" @click=\"removeReason(scope.row.id)\" v-show=\"scope.row.id!==0\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      <!--时间管理-->\r\n      <el-card shadow=\"always\" :v-loading=\"isLoading\" style=\"width: 500px;height: 300px\">\r\n        <el-space style=\"margin-bottom: 10px\">\r\n          <el-input placeholder=\"时间段名称\" v-model=\"this.timeName\"/>\r\n          <el-button @click=\"addTime\">添加时间段</el-button>\r\n        </el-space>\r\n        <el-table\r\n            :data=\"times\"\r\n            highlight-current-row\r\n            max-height=\"220\">\r\n          <el-table-column label=\"ID\" prop=\"id\"></el-table-column>\r\n          <el-table-column label=\"时间段名称\" prop=\"name\"></el-table-column>\r\n          <el-table-column label=\"操作\" >\r\n            <template #default=\"scope\">\r\n              <el-button type=\"danger\" @click=\"removeTime(scope.row.id)\" v-show=\"scope.row.id!==0\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n    </el-space>\r\n\r\n    <!--教室管理-->\r\n    <el-card shadow=\"always\" :v-loading=\"isLoading\" style=\"width: 1050px;height: 450px;margin-top: 40px;\">\r\n      <el-space>\r\n        <el-button @click=\"dialogVisible = true\" style=\"margin-bottom: 10px\">添加教室</el-button>\r\n      </el-space>\r\n      <el-table\r\n          :data=\"rooms\"\r\n          highlight-current-row\r\n          max-height=\"500\">\r\n        <el-table-column align=\"center\" label=\"ID\" prop=\"id\" width=\"50px\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"教室名称\" prop=\"name\" ></el-table-column>\r\n        <el-table-column align=\"center\" label=\"容量\" prop=\"capacity\" width=\"60px\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"描述\" prop=\"description\" width=\"300px\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"状态\">\r\n          <template #default=\"scope\">\r\n            <el-tag v-show=\"scope.row.status === '1'\">可用</el-tag>\r\n            <el-tag type=\"danger\" v-show=\"scope.row.status === '2'\">维护中</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" >\r\n          <template #default=\"scope\">\r\n            <el-button type=\"primary\" @click=\"getRoomFromRow(scope.row)\">更新</el-button>\r\n            <el-button type=\"danger\" @click=\"removeRoom(scope.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!--添加教室-->\r\n    <el-dialog\r\n        v-model=\"dialogVisible\"\r\n        title=\"活动管理\"\r\n        width=\"30%\"\r\n    >\r\n      <el-form\r\n          label-width=\"100px\"\r\n          :model=\"roomInfo\"\r\n          style=\"max-width: 460px\"\r\n      >\r\n        <el-form-item label=\"教室ID\">\r\n          <el-input v-model=\"roomInfo.id\" :disabled=\"isUpdate\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"教室名称\">\r\n          <el-input v-model=\"roomInfo.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"容量\">\r\n          <el-input type=\"number\" v-model=\"roomInfo.capacity\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\">\r\n          <el-input v-model=\"roomInfo.description\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-switch\r\n              v-model=\"roomInfo.status\"\r\n              style=\"--el-switch-on-color: #13ce66; --el-switch-off-color: #ff4949\"\r\n              active-text=\"可用\"\r\n              inactive-text=\"维护\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmForm\">确认</el-button>\r\n      </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ElMessage, ElMessageBox} from \"element-plus\";\r\nlet formData = new FormData();\r\nexport default {\r\n  name: \"RoomAndReasonManage\",\r\n  data(){\r\n    return{\r\n      dialogVisible:false,\r\n      isLoading:true,\r\n      //原因\r\n      reasonName:'',\r\n      reasons:[],\r\n      //时间段\r\n      timeName:'',\r\n      times:[],\r\n      //教室\r\n      roomInfo:{\r\n        id:'',\r\n        name:'',\r\n        capacity:'',\r\n        description:'',\r\n        status:true,\r\n        imgUrl:'',\r\n      },\r\n      rooms:[],\r\n      isUpdate:false,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getAllReason();\r\n    this.getAllTime();\r\n    this.getAllRoom();\r\n  },\r\n  methods:{\r\n    //原因\r\n    getAllReason(){\r\n      this.$http({\r\n        method:'get',\r\n        url:'/reason'\r\n      }).then(({data}) =>{\r\n        this.reasons = data.list;\r\n      })\r\n    },\r\n    addReason(){\r\n      this.$http({\r\n        method:'post',\r\n        url:'/reason/' + this.reasonName,\r\n      }).then(({data})=>{\r\n        if (data.code ===200){\r\n          this.getAllReason();\r\n          this.reasonName = '';\r\n        }\r\n      })\r\n    },\r\n    removeReason(id){\r\n      this.$http({\r\n        method:'delete',\r\n        url:'/reason/?id=' + id,\r\n      }).then(({data})=>{\r\n        if (data.code === 200){\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功',\r\n          })\r\n          this.getAllReason();\r\n        }\r\n      })\r\n    },\r\n    //时间段\r\n    getAllTime(){\r\n      this.$http({\r\n        method:'get',\r\n        url:'/timeOption'\r\n      }).then(({data}) =>{\r\n        this.times = data.list;\r\n      })\r\n    },\r\n    addTime(){\r\n      this.$http({\r\n        method:'post',\r\n        url:'/timeOption/' + this.timeName,\r\n      }).then(({data})=>{\r\n        if (data.code ===200){\r\n          //利用延时解决更新列表错误的问题\r\n          this.timer = setTimeout(() => {   //设置延迟执行\r\n            this.getAllTime();\r\n            this.timeName = '';\r\n          }, 100);\r\n\r\n        }\r\n      })\r\n    },\r\n    removeTime(id){\r\n      this.$http({\r\n        method:'delete',\r\n        url:'/timeOption/' + id,\r\n      }).then(({data})=>{\r\n        if (data.code === 200){\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功',\r\n          })\r\n          this.getAllTime();\r\n        }\r\n      })\r\n    },\r\n    //教室\r\n    getAllRoom(){\r\n      this.$http({\r\n        method:'get',\r\n        url:'/room'\r\n      }).then(res =>{\r\n        this.rooms = res.data.list;\r\n      })\r\n    },\r\n    confirmForm(){\r\n      if (this.isUpdate) {\r\n        this.updateRoom();\r\n      }else {\r\n        this.addRoom()\r\n      }\r\n    },\r\n    addRoom(){\r\n      if (this.roomInfo.status){\r\n        this.roomInfo.status = '1';\r\n      }else {\r\n        this.roomInfo.status = '2';\r\n      }\r\n        this.$http({\r\n          method:'post',\r\n          url:'/room',\r\n          data:this.roomInfo\r\n        }).then(({data})=>{\r\n          if (data.code ===200){\r\n            ElMessage({\r\n              type: 'success',\r\n              message: '添加成功',\r\n            })\r\n          }else {\r\n            ElMessage({\r\n              type: 'error',\r\n              message: data.msg,\r\n            })\r\n          }\r\n        })\r\n      this.dialogVisible = false;\r\n      this.roomInfo.status = true;\r\n      this.roomInfo.name = '';\r\n      this.roomInfo.capacity = '';\r\n      this.roomInfo.imgUrl = '';\r\n      this.roomInfo.description = '';\r\n      this.isUpdate = false;\r\n      //利用延时解决更新列表错误的问题\r\n      this.timer = setTimeout(() => {   //设置延迟执行\r\n        this.getAllTime();\r\n        this.getAllRoom();\r\n      }, 100);\r\n\r\n    },\r\n    removeRoom(id){\r\n      this.$http({\r\n        method:'delete',\r\n        url:'/room/' + id,\r\n      }).then(({data})=>{\r\n        if (data.code === 200){\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功',\r\n          })\r\n          this.getAllRoom();\r\n        }\r\n      })\r\n    },\r\n\r\n    getRoomFromRow(row) {\r\n      this.isUpdate = true;\r\n      this.roomInfo = JSON.parse(JSON.stringify(row));\r\n      this.dialogVisible = true;\r\n      this.roomInfo.status = this.roomInfo.status === '1';\r\n    },\r\n\r\n    updateRoom(){\r\n      if (this.roomInfo.status){\r\n        this.roomInfo.status = '1';\r\n      }else {\r\n        this.roomInfo.status = '2';\r\n      }\r\n        this.$http({\r\n          method: 'put',\r\n          url: '/room',\r\n          data: this.roomInfo\r\n        }).then(({data}) => {\r\n          if (data.code === 200) {\r\n            ElMessage({\r\n              type: 'success',\r\n              message: '修改成功',\r\n            })\r\n          } else {\r\n            ElMessage({\r\n              type: 'error',\r\n              message: data.msg,\r\n            })\r\n          }\r\n        })\r\n      this.timer = setTimeout(() => {   //设置延迟执行\r\n        this.getAllTime();\r\n        this.getAllRoom();\r\n      }, 200);\r\n\r\n      this.dialogVisible = false;\r\n      this.roomInfo.status = true;\r\n      this.roomInfo.name = '';\r\n      this.roomInfo.capacity = '';\r\n      this.roomInfo.imgUrl = '';\r\n      this.roomInfo.description = '';\r\n      this.isUpdate = false;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./RoomTimeAndReasonManage.vue?vue&type=template&id=043f85c6\"\nimport script from \"./RoomTimeAndReasonManage.vue?vue&type=script&lang=js\"\nexport * from \"./RoomTimeAndReasonManage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/springforest/WebstormProjects/RBS/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createVNode","_component_el_page_header","content","onBack","$router","push","_createElementVNode","_component_el_space","_component_el_card","shadow","$data","_component_el_input","placeholder","reasonName","$event","_component_el_button","onClick","$options","_component_el_table","data","_component_el_table_column","label","prop","default","scope","type","row","id","timeName","align","width","_component_el_tag","status","_component_el_dialog","title","footer","_component_el_form","model","_component_el_form_item","disabled","name","capacity","description","_component_el_switch","FormData","dialogVisible","isLoading","reasons","times","roomInfo","imgUrl","rooms","isUpdate","mounted","this","getAllReason","getAllTime","getAllRoom","methods","$http","method","url","then","list","addReason","code","removeReason","ElMessage","message","addTime","timer","setTimeout","removeTime","res","confirmForm","updateRoom","addRoom","msg","removeRoom","getRoomFromRow","JSON","parse","stringify","__exports__","render"],"sourceRoot":""}